"use strict";function initWS(){var e=new WebSocket("ws://localhost:8080/ws");return e.onopen=function(){},e.onmessage=function(e){var t=JSON.parse(e.data);1==t[0].create?window.location.replace("/"):alert(t[0].err)},e.onclose=function(){$("#new").append("<p>Socket closed</p>")},e}function sendPost(){var e=document.getElementById("titulo").value,t=document.getElementById("tags").value,n=tinymce.get("text").getContent(),o=JSON.stringify({request:[{method:"createDoc",collection:"posts",values:{titulo:e,tags:t,texto:makeJsonStr(n)}}]});return ws.send(o),!1}function makeJsonStr(e){return e=e.replace(/<|>/g,function(e){return"<"==e?"&lt;":"&gt;"}),e=e.replace(/\n/g,"")}var ws=initWS();